"use strict";(self.webpackChunkangular_diceApp=self.webpackChunkangular_diceApp||[]).push([[263],{1263:(N,d,o)=>{o.r(d),o.d(d,{UserModule:()=>F});var U=o(9808),a=o(2226),k=o(5272),i=o(4182),b=o(5226),l=o.n(b),e=o(2096),p=o(7556),m=o(520),T=o(2340),h=o(7221),g=o(1086);let f=(()=>{class n{constructor(t,r){this._http=t,this._authService=r,this.apiUrl=T.N.apiUrl}update(t){return this.setHeaders(),this._http.put(`${this.apiUrl}/${this.getUserId}`,{nickname:t},{headers:this.headers}).pipe((0,h.K)(r=>(0,g.of)(new m.UA(r))))}delete(t){return this.setHeaders(),this._http.delete(`${this.apiUrl}/${t}/games`,{headers:this.headers}).pipe((0,h.K)(r=>(0,g.of)(new m.UA(r))))}get getUserId(){var t;return null===(t=this._authService.getUser)||void 0===t?void 0:t.id}get getToken(){return localStorage.getItem("token")}setHeaders(){this.headers=(new m.WM).set("Authorization","Bearer "+this.getToken)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(m.eN),e.LFG(p.e))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var v=o(2486);const S=[{path:"",component:k.O,children:[{path:"update/:id",component:(()=>{class n{constructor(t,r,u,c){this._authService=t,this._userService=r,this._helper=u,this._formBuilder=c}ngOnInit(){var t;this.user=this._authService.getUser,this.nicknameForm=this._formBuilder.group({nickname:[null===(t=this.user)||void 0===t?void 0:t.nickname,[i.kI.required,i.kI.minLength(4),i.kI.maxLength(15)]]})}update(){const t=this.nicknameForm.value.nickname;this._userService.update(t).subscribe(r=>{this._helper.isHttpErrorResponse(r)?400===r.status?l().fire("Error",r.error.error.nickname[0],"error"):409===r.status&&l().fire("Error",r.error.error,"error"):(l().fire("Success",r.message,"success"),this._authService.setNewNickname(t))})}get minLengthError(){var t;return void 0!==(null===(t=this.nicknameForm.controls.nickname.errors)||void 0===t?void 0:t.minlength)}get maxLengthError(){var t;return void 0!==(null===(t=this.nicknameForm.controls.nickname.errors)||void 0===t?void 0:t.maxlength)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.e),e.Y36(f),e.Y36(v.W),e.Y36(i.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-nickname"]],decls:13,vars:4,consts:[[1,"text-center","text-3xl","mb-6","pt-[30px]"],["autocomplete","off",1,"w-full",3,"formGroup","ngSubmit"],[1,"w-full","relative","border-b-[2px]","border-solid","border-[#d9d9d9]","mb-[23px]"],[1,"font-['Poppins-Regular']","text-[14px]","text-[#333333]","leading-normal","pl-[7px]"],["type","text","formControlName","nickname","placeholder","Introduce a nickname",1,"font-['Poppins-Medium']","text-[16px]","text-[#333333]","leading-tight","block","w-full","h-[55px]","bg-transparent","pr-[7px]","pl-[43px]",3,"value"],[1,"focus-input100"],[1,"container-login100-form-btn"],[1,"wrap-login100-form-btn"],[1,"login100-form-bgbtn"],["type","submit",1,"login100-form-btn",3,"disabled"]],template:function(t,r){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Update nickname"),e.qZA(),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return r.update()}),e.TgZ(3,"div",2)(4,"span",3),e._uU(5,"Nickname"),e.qZA(),e._UZ(6,"input",4)(7,"span",5),e.qZA(),e.TgZ(8,"div",6)(9,"div",7),e._UZ(10,"div",8),e.TgZ(11,"button",9),e._uU(12),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",r.nicknameForm),e.xp6(4),e.s9C("value",null==r.user?null:r.user.nickname),e.xp6(5),e.Q6J("disabled",(null==r.user?null:r.user.nickname)===r.nicknameForm.value.nickname||r.minLengthError||r.maxLengthError),e.xp6(1),e.hij(" ",(null==r.user?null:r.user.nickname)===r.nicknameForm.value.nickname?"Nicknames are equal":r.minLengthError?"Nickname's minimum is 4 characters":r.maxLengthError?"Nickname's maximum is 15 characters":"Update nickname"," "))},directives:[i._Y,i.JL,i.sg,i.Fj,i.JJ,i.u],styles:[""]}),n})()},{path:"delete/throws/:id",component:(()=>{class n{constructor(t,r,u,c,A){this._userService=t,this._helper=r,this._formBuilder=u,this._activatedRoute=c,this._router=A,this.deleteForm=this._formBuilder.group({})}ngOnInit(){}delete(){this._userService.delete(this._activatedRoute.snapshot.params.id).subscribe(r=>{this._helper.isHttpErrorResponse(r)?l().fire("Error",r.error.message,"error"):(l().fire("Success",r.message,"success"),this._router.navigateByUrl("/"))})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f),e.Y36(v.W),e.Y36(i.qu),e.Y36(a.gz),e.Y36(a.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-delete-throws"]],decls:16,vars:1,consts:[[1,"text-center","text-3xl","mb-6","pt-[30px]"],["autocomplete","off",1,"w-full",3,"formGroup","ngSubmit"],[1,"font-['Poppins-Regular']","text-[16px]","text-[#333333]","leading-normal","pl-[7px]"],[1,"underline","text-red-600","text-center","block"],[1,"container-login100-form-btn","mt-6"],[1,"wrap-login100-form-btn","!w-fit"],[1,"login100-form-bgbtn","delete-btn"],["type","submit",1,"login100-form-btn"],[1,"login100-form-bgbtn"],["routerLink","/",1,"login100-form-btn"]],template:function(t,r){1&t&&(e.TgZ(0,"h1",0),e._uU(1,"Delete all throws"),e.qZA(),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return r.delete()}),e.TgZ(3,"span",2),e._uU(4,"Are you sure you want to delete all your throws made in the system?"),e.qZA(),e.TgZ(5,"span",3),e._uU(6,"This action cannot be undone"),e.qZA(),e.TgZ(7,"div",4)(8,"div",5),e._UZ(9,"div",6),e.TgZ(10,"button",7),e._uU(11," Yes, delete "),e.qZA()(),e.TgZ(12,"div",5),e._UZ(13,"div",8),e.TgZ(14,"button",9),e._uU(15," No! Take me back home "),e.qZA()()()()),2&t&&(e.xp6(2),e.Q6J("formGroup",r.deleteForm))},directives:[i._Y,i.JL,i.sg,a.rH],styles:[""]}),n})()}]}];let y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[a.Bz.forChild(S)],a.Bz]}),n})(),F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[U.ez,y,i.UX]]}),n})()}}]);